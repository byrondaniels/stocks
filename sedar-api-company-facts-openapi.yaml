openapi: 3.0.3
info:
  title: SEC EDGAR XBRL API - Company Facts
  description: |
    API specification for retrieving company financial facts from the SEC EDGAR XBRL database.
    This API provides access to structured financial data submitted by public companies.
  version: 1.0.0
  contact:
    name: SEC EDGAR Support
  externalDocs:
    description: SEC EDGAR API Documentation
    url: https://www.sec.gov/edgar/sec-api-documentation

servers:
  - url: https://data.sec.gov
    description: SEC EDGAR Production API

paths:
  /api/xbrl/companyfacts/CIK{cik}.json:
    get:
      summary: Get Company Facts
      description: |
        Retrieves comprehensive financial facts and metrics for a company by CIK.
        Returns all XBRL facts reported by the company across all taxonomies (dei, us-gaap, ifrs-full, etc.).

        **Rate Limiting**: SEC requires requests to be limited to 10 per second.
        **User-Agent Required**: All requests must include a User-Agent header identifying your application.
      operationId: getCompanyFacts
      parameters:
        - name: cik
          in: path
          required: true
          description: Central Index Key (CIK) of the company (10 digits with leading zeros, e.g., CIK0000320193 for Apple Inc.)
          schema:
            type: string
            pattern: '^\d{10}$'
            example: "0002019061"
      responses:
        '200':
          description: Successful response with company facts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyFactsResponse'
        '404':
          description: Company not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    CompanyFactsResponse:
      type: object
      description: |
        Response wrapper that includes both raw SEC data and calculated key metrics.

        **Note**: The direct SEC API returns only the `raw` section.
        This schema documents a wrapped response that adds computed `keyMetrics` for convenience.
      required:
        - success
        - data
        - message
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        data:
          $ref: '#/components/schemas/CompanyFactsData'
        message:
          type: string
          description: Human-readable message about the response
          example: "Retrieved company facts for SOUTH BOW CORPORATION"

    CompanyFactsData:
      type: object
      required:
        - raw
        - keyMetrics
      properties:
        raw:
          $ref: '#/components/schemas/RawCompanyFacts'
        keyMetrics:
          $ref: '#/components/schemas/KeyMetrics'

    RawCompanyFacts:
      type: object
      description: |
        Raw company facts as returned by the SEC EDGAR API.

        **Direct SEC API Response**: When calling the SEC API directly at
        `https://data.sec.gov/api/xbrl/companyfacts/CIK{cik}.json`,
        this is the top-level response object (no wrapper).
      required:
        - cik
        - entityName
        - facts
      properties:
        cik:
          type: string
          description: Central Index Key (CIK) of the company
          example: "0002019061"
        entityName:
          type: string
          description: Official name of the entity
          example: "SOUTH BOW CORPORATION"
        facts:
          type: object
          description: Financial facts organized by taxonomy namespace (dei, us-gaap, ifrs-full, etc.)
          properties:
            dei:
              type: object
              description: Document and Entity Information taxonomy facts
              additionalProperties:
                $ref: '#/components/schemas/FactDefinition'
            us-gaap:
              type: object
              description: US Generally Accepted Accounting Principles taxonomy facts
              additionalProperties:
                $ref: '#/components/schemas/FactDefinition'
          example:
            dei:
              EntityCommonStockSharesOutstanding:
                label: "Entity Common Stock, Shares Outstanding"
                description: "Indicate number of shares or other units outstanding..."
                units:
                  shares:
                    - end: "2024-12-31"
                      val: 208041109
                      accn: "0001628280-25-010681"
                      fy: 2024
                      fp: "FY"
                      form: "40-F"
                      filed: "2025-03-06"
                      frame: "CY2024Q4I"

    FactDefinition:
      type: object
      required:
        - label
        - description
        - units
      properties:
        label:
          type: string
          description: Human-readable label for the fact
          example: "Entity Common Stock, Shares Outstanding"
        description:
          type: string
          description: Detailed description of what the fact represents
          example: "Indicate number of shares or other units outstanding of each of registrant's classes of capital or common stock"
        units:
          type: object
          description: Map of unit types to arrays of data points
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/DataPoint'
          example:
            shares:
              - end: "2024-12-31"
                val: 208041109
                accn: "0001628280-25-010681"
                fy: 2024
                fp: "FY"
                form: "40-F"
                filed: "2025-03-06"
                frame: "CY2024Q4I"
            USD:
              - end: "2024-12-31"
                val: 11329000000
                accn: "0001628280-25-010681"
                fy: 2024
                fp: "FY"
                form: "40-F"
                filed: "2025-03-06"
                frame: "CY2024Q4I"

    DataPoint:
      type: object
      description: A single data point for a financial fact
      required:
        - val
        - accn
        - fy
        - fp
        - form
        - filed
      properties:
        start:
          type: string
          format: date
          description: Start date of the period (for period-type facts)
          example: "2024-01-01"
        end:
          type: string
          format: date
          description: End date of the period or point-in-time date
          example: "2024-12-31"
        val:
          type: number
          description: The numeric value of the fact
          example: 208041109
        accn:
          type: string
          description: SEC Accession Number
          example: "0001628280-25-010681"
        fy:
          type: integer
          description: Fiscal year
          example: 2024
        fp:
          type: string
          description: Fiscal period (FY, Q1, Q2, Q3, Q4)
          enum: [FY, Q1, Q2, Q3, Q4]
          example: "FY"
        form:
          type: string
          description: SEC form type
          example: "40-F"
        filed:
          type: string
          format: date
          description: Date the form was filed
          example: "2025-03-06"
        frame:
          type: string
          description: XBRL reporting frame
          example: "CY2024Q4I"

    KeyMetrics:
      type: object
      description: Summary of key financial metrics extracted from the company facts
      required:
        - company
        - cik
        - metrics
      properties:
        company:
          type: string
          description: Company name
          example: "SOUTH BOW CORPORATION"
        cik:
          type: string
          description: Central Index Key (CIK)
          example: "0002019061"
        metrics:
          type: object
          description: Collection of key financial metrics
          properties:
            revenue:
              $ref: '#/components/schemas/MetricValue'
            totalAssets:
              $ref: '#/components/schemas/MetricValue'
            totalLiabilities:
              $ref: '#/components/schemas/MetricValue'
            operatingIncome:
              $ref: '#/components/schemas/MetricValue'
            cashAndEquivalents:
              $ref: '#/components/schemas/MetricValue'
            currentAssets:
              $ref: '#/components/schemas/MetricValue'
            currentLiabilities:
              $ref: '#/components/schemas/MetricValue'
            netIncome:
              $ref: '#/components/schemas/MetricValue'
            earnings:
              $ref: '#/components/schemas/MetricValue'
            sharesOutstanding:
              $ref: '#/components/schemas/MetricValue'

    MetricValue:
      type: object
      description: A single metric value with metadata
      required:
        - value
        - period
        - label
      properties:
        value:
          type: number
          description: The numeric value of the metric
          example: 2120000000
        period:
          type: string
          format: date
          description: The period end date for this metric
          example: "2024-12-31"
        label:
          type: string
          description: Human-readable label for the metric
          example: "Revenues"

    ErrorResponse:
      type: object
      required:
        - success
        - message
      properties:
        success:
          type: boolean
          description: Always false for error responses
          example: false
        message:
          type: string
          description: Error message describing what went wrong
          example: "Company not found"
        error:
          type: object
          description: Additional error details
          properties:
            code:
              type: string
              description: Error code
              example: "NOT_FOUND"
            details:
              type: string
              description: Detailed error information
              example: "No company found with CIK 0002019061"

  examples:
    SuccessfulCompanyFactsResponse:
      summary: Successful company facts retrieval
      value:
        success: true
        data:
          raw:
            cik: "0002019061"
            entityName: "SOUTH BOW CORPORATION"
            facts:
              dei:
                EntityCommonStockSharesOutstanding:
                  label: "Entity Common Stock, Shares Outstanding"
                  description: "Indicate number of shares or other units outstanding..."
                  units:
                    shares:
                      - end: "2024-12-31"
                        val: 208041109
                        accn: "0001628280-25-010681"
                        fy: 2024
                        fp: "FY"
                        form: "40-F"
                        filed: "2025-03-06"
                        frame: "CY2024Q4I"
              us-gaap:
                Assets:
                  label: "Assets"
                  description: "Sum of the carrying amounts as of the balance sheet date..."
                  units:
                    USD:
                      - end: "2023-12-31"
                        val: 12032000000
                        accn: "0001628280-25-010681"
                        fy: 2024
                        fp: "FY"
                        form: "40-F"
                        filed: "2025-03-06"
                        frame: "CY2023Q4I"
                      - end: "2024-12-31"
                        val: 11329000000
                        accn: "0001628280-25-010681"
                        fy: 2024
                        fp: "FY"
                        form: "40-F"
                        filed: "2025-03-06"
                        frame: "CY2024Q4I"
          keyMetrics:
            company: "SOUTH BOW CORPORATION"
            cik: "0002019061"
            metrics:
              revenue:
                value: 2120000000
                period: "2024-12-31"
                label: "Revenues"
              totalAssets:
                value: 11329000000
                period: "2024-12-31"
                label: "Assets"
              totalLiabilities:
                value: 8719000000
                period: "2024-12-31"
                label: "Liabilities"
              operatingIncome:
                value: 1091000000
                period: "2024-12-31"
                label: "Operating Income (Loss)"
              cashAndEquivalents:
                value: 397000000
                period: "2024-12-31"
                label: "Cash and Cash Equivalents, at Carrying Value"
              currentAssets:
                value: 2198000000
                period: "2024-12-31"
                label: "Assets, Current"
              currentLiabilities:
                value: 1761000000
                period: "2024-12-31"
                label: "Liabilities, Current"
        message: "Retrieved company facts for SOUTH BOW CORPORATION"

    NotFoundError:
      summary: Company not found
      value:
        success: false
        message: "Company not found"
        error:
          code: "NOT_FOUND"
          details: "No company found with CIK 0002019061"
